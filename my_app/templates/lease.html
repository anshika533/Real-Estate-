{% extends 'common.html' %}
{% load static %}

{% block content %}
  <!-- GLightbox CSS -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/glightbox/dist/css/glightbox.min.css" />

  <div class="container mt-5">
    <h2 class="mb-4">Lease Listings</h2>

    {% if properties %}
      <div class="row">
        {% for property in properties %}
          <div class="col-md-4 mb-4">
            <div class="card">
              {% if property.images.all %}
                <a href="{{ property.images.first.image.url }}" class="glightbox" data-gallery="gallery1">
                  <img src="{{ property.images.first.image.url }}" class="card-img-top" style="height: 250px; object-fit: cover;" alt="Lease Property Image" />
                </a>
              {% else %}
                <img src="https://via.placeholder.com/400x250?text=No+Image" class="card-img-top" alt="No image available" />
              {% endif %}
              <div class="card-body">
                <h5>{{ property.title }}</h5>
                <p>{{ property.description|truncatewords:15 }}</p>
                <a href="{% url 'property_detail' property.pk %}" class="btn btn-primary">View Details</a>
              </div>
            </div>
          </div>
        {% endfor %}
      </div>
    {% else %}
      <p class="text-muted">No lease properties available at the moment.</p>
    {% endif %}
  </div>

  <!-- GLightbox JS -->
  <script src="https://cdn.jsdelivr.net/npm/glightbox/dist/js/glightbox.min.js"></script>
  <script>
    document.addEventListener('DOMContentLoaded', function() {
  try {
    var lightbox = GLightbox({
      selector: '.glightbox',
      loop: true,
      zoomable: true,
      draggable: true,
    });
    console.log('GLightbox initialized');
  } catch (e) {
    console.error('GLightbox initialization error:', e);
  }
});

  </script>

  <style>
    .lease-carousel-img {
      height: 250px !important;
      object-fit: cover;
      cursor: zoom-in;
      border-top-left-radius: 0.375rem;
      border-top-right-radius: 0.375rem;
      transition: transform 0.3s ease;
    }

    .lease-carousel-img:hover {
      transform: scale(1.03);
    }
  </style>
{% endblock %}
